<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Batterly - Cart</title>
    <link rel="stylesheet" href="css_assets/styles.css">
</head>
<body>
    <header class="site-header">
        <div class="logo">Batterly</div>
    </header>

    <nav class="top-nav">
        <a href="homepage.html" class="nav-link">Home</a>
        <a href="products.html" class="nav-link">Products</a>
        <a href="recipes.html" class="nav-link">Recipes</a>
        <a href="reviews.html" class="nav-link">Reviews</a>
        <a href="cart.html" class="nav-link active">Cart</a>
        <a href="payment.html" class="nav-link">Payment</a>
    </nav>

    <main>
        <section class="section-title">
            <h1>Shopping Cart</h1>
        </section>

        <section class="cart-items">
            <div id="cart-list">
                <!-- Items will be dynamically loaded here -->
            </div>
        </section>

        <div class="continue-payment">
            <a href="payment.html" class="btn-continue-payment">Continue to Payment</a>
        </div>

        <nav class="bottom-nav">
            <a href="about_us.html" class="nav-link">About Us</a>
            <a href="contact_us.html" class="nav-link">Contact Us</a>
        </nav>
    </main>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        const cartList = document.getElementById("cart-list");
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        if (cart.length === 0) {
            cartList.innerHTML = "<p>Your cart is empty.</p>";
            return;
        }

        cartList.innerHTML = "";

        cart.forEach((item, index) => {
            const div = document.createElement("div");
            div.className = "cart-item";
            div.innerHTML = `
                <h3 class="product-title">${item.title}</h3>
                <div class="stars">${item.stars}</div>
                <p class="product-desc">${item.desc}</p>
                <div class="quantity-adjust">
                    <button class="decrease-qty-btn">-</button>
                    <input type="number" class="qty-input" value="${item.quantity}" min="1">
                    <button class="increase-qty-btn">+</button>
                </div>
                <button class="remove-from-cart-btn">Remove</button>
            `;
            cartList.appendChild(div);

            // Remove functionality
            div.querySelector(".remove-from-cart-btn").addEventListener("click", () => {
                cart.splice(index, 1);
                localStorage.setItem("cart", JSON.stringify(cart));
                location.reload();
            });

            const qtyInput = div.querySelector(".qty-input");

            div.querySelector(".increase-qty-btn").addEventListener("click", () => {
                qtyInput.value = parseInt(qtyInput.value) + 1;
                cart[index].quantity = parseInt(qtyInput.value);
                localStorage.setItem("cart", JSON.stringify(cart));
            });

            div.querySelector(".decrease-qty-btn").addEventListener("click", () => {
                if (parseInt(qtyInput.value) > 1) {
                    qtyInput.value = parseInt(qtyInput.value) - 1;
                    cart[index].quantity = parseInt(qtyInput.value);
                    localStorage.setItem("cart", JSON.stringify(cart));
                }
            });
        });
    });
    </script>
</body>
</html>
